<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Functions Tasks</title>
</head>

<body>

    <p>Task 3</p>
    <button id="task3">Start</button>

    <p>Task 4</p>
    <button onclick="addCart();">Add to cart</button>
    <p id="task4"></p>

    <p>Task 5</p>
    <button onclick="displayMsg();">Add to cart</button>
    <p id="task5"></p>

    <p>Task 7</p>
    <button id="task71" onclick="msg++;">Add</button>
    <button id="task72" onclick="msg--;">Remove</button>

    <script>
        // Task 1
        const add = function () {
            console.log(2 + 3);
        }
        add();
        add();

        // Task 2
        function runTwice(fun) {
            fun();
            fun();
        }
        runTwice(function () {
            console.log('12b');
        });
        runTwice(add);

        // Task 3
        // function changeText() {
        //     document.getElementById('task3').innerText = 'Loading...';
        //     setTimeout(() => {
        //         document.getElementById('task3').innerText = 'Finished!';
        //     }, 1000);
        // }

        // using add event listener
        document.getElementById('task3').addEventListener('click', () => {
            document.getElementById('task3').innerText = 'Loading...';
            setTimeout(() => {
                document.getElementById('task3').innerText = 'Finished!';
            }, 1000);
        });

        // Task 4
        function addCart() {
            document.getElementById('task4').innerText = 'Added';
            setTimeout(function () {
                document.getElementById('task4').innerText = '';
            }, 2000);
        }

        // Task 5
        let interval;
        function displayMsg() {
            document.getElementById('task5').innerText = 'Added';

            // cancel the previous timeout, so it doesn't remove quickly (kind of reset)
            clearInterval(interval);

            interval = setTimeout(function () {
                document.getElementById('task5').innerText = '';
            }, 2000);

        }

        // Task 6
        // setInterval(function() {
        //     if(document.title === 'Advanced Functions Tasks') {
        //         document.title = `(2) New Messages`;
        //     }
        //     else {
        //         document.title = 'Advanced Functions Tasks';
        //     }
        // }, 2000);

        // Task 7
        let msg = 2;
        //function changeMsg(val) {
        setInterval(function () {
            if (document.title === 'Advanced Functions Tasks' && msg > 0) {
                document.title = `(${msg}) New Messages`;
            }
            else {
                document.title = 'Advanced Functions Tasks';
            }
        }, 2000);
        //}

        // Task 8
        const multiply = (val1, val2) => val1 * val2;
        console.log(multiply(3, 3));
        console.log(multiply(7, 10));

        // Task 9
        function countPositive(nums) {
            let pv = 0;
            nums.forEach((nums) => {
                if (nums > 0) {
                    pv++;
                }
                //console.log(nums[index]);
            });
            return pv;
        }
        console.log(countPositive([1, -3, 5]));
        console.log(countPositive([2, -3, -5, 7, 10, 15]));

        // Task 10
        function addNum(array, num) {
            return array.map((val) => val + num);
        }
        console.log(addNum([2, -5, 7, 10], 2));
        console.log(addNum([-2, -1, 0, 99], 2));

        // Task 11
        function remEgg(foods) {
            let egg = 0;
            return foods.filter((food) => {
                if(food === 'egg' && egg < 2) { // approach 1
                    egg++;
                    return false;
                }     
                return true;
               // return food !== 'egg'; // approach 2
            });
        }
        console.log(remEgg(['egg', 'apple', 'egg', 'egg', 'ham']));
    </script>
</body>

</html>